{
  "hash": "7fe4d517f23729d8b53f8f11999763c5",
  "result": {
    "markdown": "Ouvrez la base de données iris\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata(\"iris\")\n```\n:::\n\n\nOn peut faire un résumé de ce jeu de donnés au moyen de la fonction summary()\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(iris)\n```\n:::\n\n\n# Cas univarié :\n\nOn veut uniquement représenter une variable.\n\n## Graphiques pour une variable quantitative\n\nOn utilise principalement les trois types de graphiques suivants :\n\n-   boxplot (boite à moustache),\n\n-   dotchart (points par points),\n\n-   hist (histogramme).\n\nOn va s'intéresser uniquement à la longeur des Sépales et réaliser les trois types de graphique :\n\n\n::: {.cell layout-align=\"center\" height='5' width='5'}\n\n```{.r .cell-code}\nboxplot(iris$Sepal.Length)\n```\n\n::: {.cell-output-display}\n![](partie2_files/figure-html/unnamed-chunk-3-1.png){fig-align='center' width=672}\n:::\n\n```{.r .cell-code}\ndotchart(iris$Sepal.Length)\n```\n\n::: {.cell-output-display}\n![](partie2_files/figure-html/unnamed-chunk-3-2.png){fig-align='center' width=672}\n:::\n\n```{.r .cell-code}\nhist(iris$Sepal.Length)\n```\n\n::: {.cell-output-display}\n![](partie2_files/figure-html/unnamed-chunk-3-3.png){fig-align='center' width=672}\n:::\n:::\n\n\nLes graphiques dans R offrent de très nombreux paramètres :\n\n- titre principal ***main***, \n\n- titre des axes ***xlab, ylab*** \n\n- couleur des graphiques ***col***\n\n- type des points ***pch***\n\n\n::: {.cell}\n\n```{.r .cell-code}\nboxplot(iris$Sepal.Length,main=\"Longueur des sépales\",ylab=\"L(cm)\",col=\"purple\")\ndotchart(iris$Sepal.Length,main=\"Longueur des sépales\",\n         xlab=\"L(cm)\",col=\"purple\",pch=15)\n```\n:::\n\n\nOn peut également superposer plusieurs graphiques grâce à la fonction ***lines()*** qui permet de dessiner des lignes. \nCette fonction devra toujours être précédée d'un graphique. \n\nOn peut utiliser les arguments ***lwd*** (épaisseur du trait), ***lty***  (type de ligne) c'est à dire continue, pointillés, ...\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhist(iris$Sepal.Length,main=\"Longueur des sépales\",\n     xlab=\"L(cm)\",col=\"purple\",prob=T)\nlines(density(iris$Sepal.Length),lwd=3,col=2,lty=2)\n```\n:::\n\n\nOn peut également utiliser la fonction ***abline*** pour ajouter une droite sur un graphique existant. Les paramètres possibles sont :\n\n- ***h=*** lorsque la droite est horizontale,\n\n- ***v=*** lorsque la droite est verticale,\n\n- ***a=, b=*** lorsque la droite est oblique du type $y=a+bx$ (attention a est l'ordonnée à l'origine et b le coefficient directeur).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhist(iris$Sepal.Length,main=\"Longueur des sépales\",xlab=\"L(cm)\",col=\"purple\",prob=T)\nlines(density(iris$Sepal.Length),lwd=3,col=2,lty=2)\nabline(v=mean(iris$Sepal.Length),col=2,lwd=2,lty=2)\n```\n:::\n\n\n## Graphiques pour une variable qualitative.\n\nOn utilise principalement les deux types de graphiques suivants :\n\n-   barplot (diagramme en bâtons),\n\n-   pie (camembert ou diagramme circulaire).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbarplot(table(iris$Species))\npie(table(iris$Species))\n```\n:::\n\n\n# Cas bivarié\n\nOn veut représenter une variable en fonction d'une autre.\n\n## Une variable quantitative en fonction d'une qualitative\n\nOn veut représenter la longueur des sépales en fonction de l'espèce sur un boxplot :\n\n\n::: {.cell}\n\n```{.r .cell-code}\nboxplot(iris$Sepal.Length~iris$Species)\n```\n:::\n\n\nou bien en points par points (on va utiliser la couleur pour distinguer les espèces) :\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndotchart(iris$Sepal.Length,col=iris$Species)\nlegend(\"bottomright\",col=1:3,pch=rep(1,3),legend = levels(iris$Species),cex=0.5)\n```\n:::\n\n\nRemarque : Pour la position de la légende c'est une association top ou bottom avec left ou right. Il faut également préciser le type de points avec pch et on peut gérer la taille de la légende avec cex.\n\nOn peut aussi faire plusieurs histogrammes. On va scinder la fenêtre graphique en plusieurs parties ***par(mfrow=c(v,h))*** où v est le nombre de séparations verticales et h horizontales. Ici on a trois espèces d'iris donc on prend i=3 et j=1 :\n\n\n::: {.cell}\n\n```{.r .cell-code}\npar(mfrow=c(1,3))\nhist(iris$Sepal.Length[iris$Species==levels(iris$Species)[1]],\n     main=paste(\"Pour l'espèce \",levels(iris$Species)[1]),\n     xlab=\"Longueur du Sépale\",ylab=\"Fréquence\")\nhist(iris$Sepal.Length[iris$Species==levels(iris$Species)[2]],\n     main=paste(\"Pour l'espèce \",levels(iris$Species)[2]),\n     xlab=\"Longueur du Sépale\",ylab=\"Fréquence\")\nhist(iris$Sepal.Length[iris$Species==levels(iris$Species)[3]],\n     main=paste(\"Pour l'espèce \",levels(iris$Species)[3]),\n     xlab=\"Longueur du Sépale\",ylab=\"Fréquence\")\n```\n:::\n\n\n## Une variable quantitative en fonction d'une autre variable quantitative\n\nC'est la fonction plot qui permet de faire ce type de représentation.\n\nOn représente la longueur des sépales en fonction de leur largeur (width). Comme précédemment on peut colorer les points en fonction de l'espèce et ajouter une légende.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(iris$Sepal.Width,iris$Sepal.Length,col=iris$Species,pch=20,\n     xlab=\"largeur\",ylab=\"longueur\")\nlegend(\"topleft\",legend=levels(iris$Species),col=1:3,pch=rep(20,3),cex=0.5)\n```\n:::\n\n\n## Une variable qualitative en fonction d'une autre variable qualitative\n\nOn va créer trois classes d'iris (colonne nommée class) en fonction de la longueur du sépale : petit (inférieur à 5), moyen (entre 5 et 6) et grand (au delà de 6). On utilise la fonction cut de R :\n\n\n::: {.cell}\n\n```{.r .cell-code}\niris$class<-cut(iris$Sepal.Length,breaks = c(0,5,6,10))\niris$class<-factor(iris$class,labels=c(\"petit\",\"moyen\",\"grand\"))\n```\n:::\n\n\nOn représente alors la table de contingence de la classe définie ci-dessus en fonction de l'espèce.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmosaicplot(table(iris$Species,iris$class),\n           color = 2:4,\n           main=\"répartition des classes en fonction des espèces\")\n```\n:::\n\n\n\\newpage \n\n# Exercices\n\n## Exercice 1 :\n\nTélécharger le fichier temperat1.csv sur CONNECT puis ouvrez le dans RStudio (utiliser l'interface graphique), la première colonne correspondra aux noms des lignes du data.frame.\n\n***Premier travail :*** Reproduire la Figure 1. \n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Représentation des villes](partie2_files/figure-html/unnamed-chunk-14-1.png){fig-align='center' width=672}\n:::\n:::\n\n\n***aide :*** pour ne pas avoir de points sur le graphe on utilise type=\"n\" et on utilise la fonction text() \\[voir l'aide de R\\].\n\n***Deuxième travail :*** Représenter les températures moyennes pour les trois villes : Nantes, Brest et Rennes (Figure 2).\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot(1:12,temperat1[rownames(temperat1)==\"Bres\",1:12],xlab=\"Mois de l'année\",\n     ylim=c(0,25),col=2,type=\"b\",xaxt=\"n\",ylab=\"Température\")\naxis(1,at=1:12,labels=colnames(temperat1)[1:12])\nlines(1:12,temperat1[rownames(temperat1)==\"Nant\",1:12],col=3,type=\"b\")\nlines(1:12,temperat1[rownames(temperat1)==\"Renn\",1:12],col=4,type=\"b\")\nlegend(\"topleft\",legend=c(\"Brest\",\"Nantes\",\"Rennes\"),col=2:4,lty=rep(1,3))\n```\n\n::: {.cell-output-display}\n![Températures moyennes mensuelles pour Brest,Nantes et Rennes](partie2_files/figure-html/unnamed-chunk-15-1.png){fig-align='center' width=672}\n:::\n:::\n\n\nPour mettre les mois en labels sur l'axe des abscisses on utilisera l'argument xaxt=\"n\" dans plot et ensuite on utilisera la fonction axis() voir l'aide de R. L'argument type=\"b\" pourra être utilisé dans plot et dans lines pour dessiner les points et les courbes.\n\n## Exercice 2 :\n\nTélécharger sur Connect le fichier bordeaux1.csv et ouvrez le dans RStudio à l'aide de l'interface graphique. Les années seront utilisées pour nommer les lignes.\n\n\n::: {.cell}\n\n:::\n\n\nIl s'agit des données des vins de Bordeaux issues de \"Méthodes statistiques en gestion\" (M. Tenenhaus, Dunod, 1994).\n\nOn cherche à étudier l'éventuelle relation entre la qualité du vin et les variables météorologiques. Les variables sont les suivantes : TEMPERATURE : somme des températures moyennes journalières, SOLEIL : durée d'insolation, CHALEUR : nombre de jours de grande chaleur, PLUIE : hauteur des pluies, Y (QUALITE DU VIN) : 1 (Bon), 2 (Moyen), 3 (Médiocre).\n\n1.  Faire les boxplot des variables température et pluie en fonction de la qualité du vin. Les deux graphes seront dans une même fenêtre. La ligne en pointillé horizontale représente la moyenne globale de la variable (voir fonction ***abline()***). On reclassera les modalités de la variable qualité.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbordeaux1$Y1<-factor(bordeaux1$Y1,levels=c(\"médiocre\",\"moyen\",\"bon\"))\npar(mfrow=c(1,2))\nboxplot(bordeaux1$Temperature~bordeaux1$Y1,xlab=\"Qualité du vin\",ylab=\"Temperature\")\nabline(h=mean(bordeaux1$Temperature),col=2,lwd=2,lty=2)\nboxplot(bordeaux1$Pluie~bordeaux1$Y1,xlab=\"Qualité du vin\",ylab=\"Pluie\")\nabline(h=mean(bordeaux1$Pluie),col=2,lwd=2,lty=2)\n```\n\n::: {.cell-output-display}\n![](partie2_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\n2.  Faire les 3 histogrammes de la variable chaleur en fonction de la qualité du vin dans une même fenêtre graphique. La droite verticale correspond à la moyenne globale.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Voir la correction\"}\npar(mfrow=c(1,3))\nhist(bordeaux1$Chaleur[bordeaux1$Y1==\"médiocre\"],xlab=\"Temperature\",ylab=\"Fréquence\",main=\"Qualité médiocre\")\nabline(v=mean(bordeaux1$Chaleur),col=2,lwd=2,lty=2)\nhist(bordeaux1$Chaleur[bordeaux1$Y1==\"moyen\"],xlab=\"Temperature\",ylab=\"Fréquence\",main=\"Qualité moyen\")\nabline(v=mean(bordeaux1$Chaleur),col=2,lwd=2,lty=2)\nhist(bordeaux1$Chaleur[bordeaux1$Y1==\"bon\"],xlab=\"Temperature\",ylab=\"Fréquence\",main=\"Qualité bon\")\nabline(v=mean(bordeaux1$Chaleur),col=2,lwd=2,lty=2)\n```\n\n::: {.cell-output-display}\n![](partie2_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\n3.  Créer une variable pluie_quali qui correspondra à la variable PLUIE et dont les modalités seront :\n\n-   Faibles lorsque la variable PLUIE sera inférieure à sa médiane\n\n-   Fortes lorsque la variable PLUIE sera supérieure ou égale à sa médiane.\n\nDessiner la répartition de la qualité des vins en fonctions des deux modalités Faibles et Fortes.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Voir la correction\"}\nmed<-median(bordeaux1$Pluie)\nbordeaux1$pluie_quali<-factor(as.numeric(bordeaux1$Pluie>med),labels = c(\"Faibles\",\"Fortes\"))\nmosaicplot(table(bordeaux1$Y1,bordeaux1$pluie_quali),col=3:2,main=\"Répartition de la qualité en fonction de la quantité de pluie\")\n```\n\n::: {.cell-output-display}\n![](partie2_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\n4.  Reproduire le graphique suivant\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Voir la correction\"}\nbordeaux1 <- read.csv(\"~/Dropbox/ONIRIS/cours/EC552_IntroR/Cours BM VC/bordeaux1.csv\", row.names=1)\nplot(bordeaux1$Temperature,bordeaux1$Pluie,type=\"n\",col=bordeaux1$Y,\n     main=\"Données climatiques associées aux vins\",xlab=\"température\",\n     ylab=\"pluie\")\ntext(bordeaux1$Temperature,bordeaux1$Pluie,rownames(bordeaux1),col=bordeaux1$Y,cex=.5)\n```\n\n::: {.cell-output-display}\n![](partie2_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "partie2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}